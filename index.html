<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–º–µ—Ç–æ–∫</title>
    <script defer src="js/vue.min.js"></script>
    <script defer src="js/main.js"></script>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<div id="app">
    <h1>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–º–µ—Ç–æ–∫</h1>

    <div class="columns">
        <div class="column">
            <h2>1</h2>

            <div v-if="showAddNoteForm">
                <h3>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏</h3>
                <form @submit.prevent="addNote">
                    <div>
                        <input type="text" v-model="newNoteTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
                    </div>

                    <div v-for="(item, index) in newNoteItems" :key="index">
                        <input type="text" v-model="item.text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—É–Ω–∫—Ç" required>

                        <button v-if="newNoteItems.length === 3" @click.prevent="clearItem(index)">–û—á–∏—Å—Ç–∏—Ç—å</button>

                        <button v-if="newNoteItems.length >= 4" @click.prevent="removeItem(index)">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    <div>
                        <button v-if="canAddItem" @click.prevent="addItem" :disabled="!canAddItem">–î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç</button>
                        <button type="submit" :disabled="!newNoteTitle.trim()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</button>
                    </div>
                    <!-- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞" -->
                    <label>
                        <input type="checkbox" v-model="isPriority"> –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
                    </label>
                </form>
            </div>

            <button id="addOrDelite" @click="toggleAddNoteForm" :disabled="!canAddNote">
                {{ showAddNoteForm ? "–û—Ç–º–µ–Ω–∏—Ç—å" : "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É" }}
            </button>

            <transition-group name="move" tag="div">
                <div v-for="(note, index) in columns[0]" :key="note.id" :class="{'note': true, 'priority': note.isPriority}">
                    <h3>{{ note.title }}</h3>
                    <div v-if="note.isPriority" class="priority-label">‚≠ê–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—èüòé</div>
                    <ul>
                        <li v-for="(item, i) in note.items" :key="i">
                            <input
                                    type="checkbox"
                                    v-model="item.done"
                                    @change="updateProgress()"
                                    :disabled="item.disabled">
                            {{ item.text }}
                        </li>
                    </ul>
                </div>
            </transition-group>
        </div>

        <div class="column">
            <h2>2</h2>
            <transition-group name="move" tag="div">
                <div v-for="(note, index) in columns[1]" :key="note.id" :class="{'note': true, 'priority': note.isPriority}">
                    <h3>{{ note.title }}</h3>
                    <div v-if="note.isPriority" class="priority-label">‚≠ê–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—èüòé</div>
                    <ul>
                        <li v-for="(item, i) in note.items" :key="i">
                            <input
                                    type="checkbox"
                                    v-model="item.done"
                                    @change="updateProgress()"
                                    :disabled="item.disabled">
                            {{ item.text }}
                        </li>
                    </ul>
                </div>
            </transition-group>
        </div>

        <div class="column">
            <h2>3</h2>
            <transition-group name="move" tag="div">
                <div v-for="(note, index) in columns[2]" :key="note.id" :class="{'note': true, 'priority': note.isPriority, 'completed': true}">
                    <h3>{{ note.title }}</h3>
                    <div v-if="note.isPriority" class="priority-label">‚≠ê–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—èüòé</div>
                    <p>–ó–∞–≤–µ—Ä—à–µ–Ω–æ: {{ note.completedAt }}</p>
                </div>
            </transition-group>
        </div>
    </div>
</div>

</body>
</html>